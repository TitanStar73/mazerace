/*
@title: Maze Race
@author: Arush
@tags: []
@addedOn: 2024-00-00
*/

const player = "p"
const brick = "b"
const block = "m"
const player2 = "w"
const indicator = "i"
const indicator2 = "j"

rotatedLeft = [ player, bitmap`
................
................
................
................
................
....00.....00...
...3333333333...
..333333333333..
..333333333333..
...3333333333...
....00.....00...
................
................
................
................
................` ]
rotatedRight = [ player, bitmap`
................
................
................
................
................
...00.....00....
...3333333333...
..333333333333..
..333333333333..
...3333333333...
...00.....00....
................
................
................
................
................` ]
rotatedUp = [ player, bitmap`
................
................
.......33.......
......3333......
.....033330.....
.....033330.....
......3333......
......3333......
......3333......
......3333......
......3333......
.....033330.....
.....033330.....
.......33.......
................
................` ]
rotatedDown = [ player, bitmap`
................
................
.......33.......
.....033330.....
.....033330.....
......3333......
......3333......
......3333......
......3333......
......3333......
.....033330.....
.....033330.....
......3333......
.......33.......
................
................` ]

rotatedLeft2 = [ player2, bitmap`
................
................
................
................
................
....00.....00...
...5555555555...
..555555555555..
..555555555555..
...5555555555...
....00.....00...
................
................
................
................
................` ]
rotatedRight2 = [ player2, bitmap`
................
................
................
................
................
...00.....00....
...5555555555...
..555555555555..
..555555555555..
...5555555555...
...00.....00....
................
................
................
................
................` ]
rotatedUp2 = [ player2, bitmap`
................
................
.......55.......
......5555......
.....055550.....
.....055550.....
......5555......
......5555......
......5555......
......5555......
......5555......
.....055550.....
.....055550.....
.......55.......
................
................` ]
rotatedDown2 = [ player2, bitmap`
................
................
.......55.......
.....055550.....
.....055550.....
......5555......
......5555......
......5555......
......5555......
......5555......
.....055550.....
.....055550.....
......5555......
.......55.......
................
................` ]


setLegend(
  [ player, bitmap`
................
................
.......33.......
......3333......
.....033330.....
.....033330.....
......3333......
......3333......
......3333......
......3333......
......3333......
.....033330.....
.....033330.....
.......33.......
................
................` ],
  [ brick, bitmap`
CCCCCCCCCC9CCCCC
CCCCCCCCCC9CCCCC
CCCCCCCCCC9CCCCC
9999999999999999
CCCCC9CCCCCCCCCC
CCCCC9CCCCCCCCCC
CCCCC9CCCCCCCCCC
9999999999999999
CCCCCCCCCC9CCCCC
CCCCCCCCCC9CCCCC
CCCCCCCCCC9CCCCC
9999999999999999
CCCCC9CCCCCCCCCC
CCCCC9CCCCCCCCCC
CCCCC9CCCCCCCCCC
9999999999999999`],
  [ player2, bitmap`
................
................
.......55.......
.....055550.....
.....055550.....
......5555......
......5555......
......5555......
......5555......
......5555......
.....055550.....
.....055550.....
......5555......
.......55.......
................
................` ],
  [ block, bitmap`
.00000000000000.
00CCCCCCCCCCCC00
0CCCCCCCCCCCCCC0
0CCCCCCCCCCCCCC0
0CCCC......CCCC0
0CCC........CCC0
0CCC........CCC0
0CCC........CCC0
0CCC........CCC0
0CCC........CCC0
0CCC........CCC0
0CCCC......CCCC0
0CCCCCCCCCCCCCC0
0CCCCCCCCCCCCCC0
00CCCCCCCCCCCC00
.00000000000000.`],
  [ indicator, bitmap`
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333`],
  [ indicator2, bitmap`
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555
5555555555555555`]
)

let mapSize = [10]

let level = 0
const levels = [
  map`
j..........
.p..m......
....m......
bbbbbm.....
...........
...........
......m....
.....mbbbbb
.....m.....
.........w.
..........i`
]

setSolids([player,player2,block,brick])

setMap(levels[level])

setPushables({
  [ player ]: [block],
  [ player2 ]: [block]
})

onInput("s", () => {
  setLegend(rotatedDown)
  getFirst(player).y += 1
})
onInput("w", () => {
  setLegend(rotatedUp)
  getFirst(player).y -= 1
})
onInput("a", () => {
  setLegend(rotatedLeft)
  getFirst(player).x -= 1
})
onInput("d", () => {
  setLegend(rotatedRight)
  getFirst(player).x += 1
})

onInput("k", () => {
  setLegend(rotatedDown2)
  getFirst(player2).y += 1
})
onInput("i", () => {
  setLegend(rotatedUp2)
  getFirst(player2).y -= 1
})
onInput("j", () => {
  setLegend(rotatedLeft2)
  getFirst(player2).x -= 1
})
onInput("l", () => {
  setLegend(rotatedRight2)
  getFirst(player2).x += 1
})


afterInput(() => {
    if (getFirst(player).x == mapSize[level] && getFirst(player).y == mapSize[level]){
       addText("Player 1 wins", { x: 1, y: 1, color: color`3` });
    }
   if (getFirst(player2).x == 0 && getFirst(player2).y == 0){
       addText("Player 2 wins", { x: 1, y: 1, color: color`5` });
    }
})